try{let t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},e=(new t.Error).stack;e&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[e]="4032b1dd-8989-4e5d-b8b4-9efa90715fef",t._sentryDebugIdIdentifier="sentry-dbid-4032b1dd-8989-4e5d-b8b4-9efa90715fef")}catch(e){}{let t="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:{};t.SENTRY_RELEASE={id:"f7a3b7576263fd8d05d0380dc061abc3dc8c58dc"}}(self.webpackChunkbooqable=self.webpackChunkbooqable||[]).push([[373],{481:function(t,e,r){"use strict";var n=r(72505),s=r.n(n),o=r(55364),i=r.n(o);class a{static async track(t,e,r){const n=i()(Object.assign({},window.globalTrackingData||{}),e);n.feature_category&&!n.feature&&(n.feature=n.feature_category),window.analytics&&window.analytics.track&&window.analytics.track(t,n),"development"!==window.environment&&"test"!==window.environment||console.debug(`%c EventTracker track: ${t}, ${JSON.stringify(n)}`,"color: #24ad4e");const o={event:t,properties:n},a=await s()({method:"POST",url:"/track",data:o});return r&&r(),a}static featureCategory(){const t=location.pathname;return t.includes("/product_groups")||t.includes("/products")?"Products":t.includes("/customers")?"Customers":void 0}static trackDispatch(t,e){switch(t.type){case"IMPORT_INITIALIZE":return a.track("Import visit",{type:t.payload.type,feature_category:this.featureCategory(),feature:"Import"});case"IMPORT_CANCEL":if(e&&e.import.uploaded)return a.track("Import cancel",{feature_category:this.featureCategory(),feature:"Import"});break;case"IMPORT_UPLOAD_FILE":return a.track("Import upload",{file:t.payload.file.name,columns:t.payload.columns.length,items:t.payload.data.length,feature_category:this.featureCategory(),feature:"Import"});case"IMPORT_FINISH_MAPPING":return a.track("Import finish mapping",{mapped_columns:e.import.mapping.size,feature_category:this.featureCategory(),feature:"Import"});case"IMPORT_START":return a.track("Import start",{feature_category:this.featureCategory(),feature:"Import"});case"IMPORT_UPDATE":if(t.payload.import.completed&&"completed"!==e.import.step)return a.track("Import complete",{feature_category:this.featureCategory(),feature:"Import"});break;case"PAYMENTS_CREATE_START":{const{attributes:e}=t.payload.options,r={context:e.document_id?"invoice":"order",amount:e.amount_in_cents,deposit:e.deposit_in_cents};return e.payment_type.startsWith("manual")?(r.type=e.payment_type,r.method=e.transaction_type,r.custom_date=null!=e.paid_at,r.custom_date):(r.type=`${e.payment_type}_${e.transaction_type}`,r.type)}}}}e.A=a},86158:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";var qs__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(55373),qs__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(qs__WEBPACK_IMPORTED_MODULE_4__),shared_utils_Routing__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(10196),shared_lib_moment__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(64974),back_office_v2_utils_event_tracker__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(481),inflected__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(42088);const order=(t,e)=>_resource("orders",t,e),customer=(t,e="edit")=>_resource("customers",t,e),product=(t,e)=>_resource("product_groups",t,e),bundle=(t,e)=>_resource("bundles",t,e),customers=(t=void 0)=>_collection("customers",t),documents=(t=void 0)=>_collection("reports/documents",t),orders=(t=void 0)=>_collection("orders",t),bundles=(t=void 0)=>_collection("bundles",t),products=(t=void 0)=>_collection("product_groups",t),document=(t,e)=>_resource("documents",t,e),collection=(t,e)=>_resource("collections",t,e),collections=(t=void 0)=>_resource("collections",t),location=(t,e)=>_resource("locations",t,e),calendarLink=(t="products",e={})=>{const r=t=>(0,shared_lib_moment__WEBPACK_IMPORTED_MODULE_1__.Ay)(t).format();e.from&&(e.from=r(e.from)),e.till&&(e.till=r(e.till));return`/calendar/${t}?${qs__WEBPACK_IMPORTED_MODULE_4___default().stringify(e,{encode:!1})}`},navigateToResource=(type,object,action)=>navigate(eval(type)(object,action)),navigate=(t,e)=>{if(e&&(e.ctrlKey||e.metaKey||1===e.button))return!1;if(e&&e.preventDefault(),checkForUnsavedChanges()&&shared_utils_Routing__WEBPACK_IMPORTED_MODULE_0__.B.push(t),window.localStorage.getItem("settingsBackLink")){const e=JSON.parse(window.localStorage.getItem("settingsBackLink"));e.target===t||t.startsWith(`/${e.resource}`)||localStorage.removeItem("settingsBackLink")}},navigateLink=(t,e=!1)=>{const r=t.currentTarget,n=r.getAttribute("data-track-event"),s="_blank"===r.target;if(n){const t=new URL(r.href),e=s?r.href:`${t.pathname}${t.search}`;back_office_v2_utils_event_tracker__WEBPACK_IMPORTED_MODULE_2__.A.track(n,{href:e})}if(!s){let e=r.href;return e=e.replace(window.location.origin,""),RoutingUtils.navigate(e,t)}},hasUnsavedChanges=()=>!(window.testMode||!window.dirtyForms||window.skipUnsavedChangesCheck)&&Object.values(window.dirtyForms).filter((t=>t))[0],checkForUnsavedChanges=()=>!hasUnsavedChanges()||window.confirm("Leave with unsaved changes?"),resourcePath=(t,e,...r)=>_path((0,inflected__WEBPACK_IMPORTED_MODULE_3__.td)(t),e,...r),_resource=(t,e,r)=>_path(t,(null!=e?e.id:void 0)||e,r),_collection=(t,e)=>_path(t,e),_path=(...t)=>`/${t.filter((t=>null!=t)).join("/")}`,RoutingUtils={order:order,customer:customer,product:product,bundle:bundle,customers:customers,documents:documents,orders:orders,bundles:bundles,products:products,document:document,collection:collection,collections:collections,location:location,calendarLink:calendarLink,navigateToResource:navigateToResource,navigate:navigate,navigateLink:navigateLink,hasUnsavedChanges:hasUnsavedChanges,checkForUnsavedChanges:checkForUnsavedChanges,resourcePath:resourcePath,_resource:_resource,_collection:_collection,_path:_path};__webpack_exports__.A=RoutingUtils},88267:function(t,e,r){"use strict";r.r(e),r.d(e,{EventTracker:function(){return f.A},FeatureFlags:function(){return p.gH},Format:function(){return a.Ay},PhoneRegexp:function(){return b},Routing:function(){return u.A},Settings:function(){return d.Ay},Time:function(){return c.Ay},URLRegexp:function(){return g},default:function(){return O},featureAllowed:function(){return p.vQ},featureDisabled:function(){return p.jL},featureEnabled:function(){return p.at},generateUUID:function(){return v},hasAllPermissions:function(){return h},hasPermission:function(){return y},mergeDefaultRequestOptions:function(){return _},prependProtocol:function(){return A},setPageTitle:function(){return l.A},stringIsLink:function(){return w}});var n=r(42426),s=r.n(n),o=r(19747),i=r.n(o),a=r(58311),c=r(18481),u=r(86158),d=r(90397),l=r(3295);function _(t,e){t||(t={});let r=e.include||[];t.include&&r.push(t.include),r=r.join(",");let n=null;t.fields&&(n=Object.assign({},t.fields||{}),Object.keys(n).forEach((t=>{const r=e.fields&&e.fields[t];r&&(n[t]=n[t].concat(r),n[t]=n[t].join(","))})));const s={include:r};return n&&(s.fields=n),s}var f=r(481),p=r(26807);const m=()=>{const t=window.store.getState(),e=t.session.currentEmployeeId;return t.orm.employees.getById(e).permissions||[]},y=(...t)=>{const e=m();return s()(t,(t=>e.includes(t)))},h=t=>{const e=m();return i()(t,(t=>e.includes(t)))},g=/(https?:\/\/)?(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_+.~#?&/=]*)/,b=/tel:[+\-\d]*/,w=t=>t.match(g)||t.match(b),A=t=>t.replace(g,(t=>t.startsWith("http")||t.startsWith("https")||t.startsWith("mailto")?t:`https://${t}`)),v=()=>{try{return crypto.randomUUID()}catch(t){return window.URL.createObjectURL(new Blob([])).substring(34)}};var O={hasPermission:y,setPageTitle:l.A,mergeDefaultRequestOptions:_,Format:a.Ay,Time:c.Ay,Routing:u.A,Settings:d.Ay,EventTracker:f.A}},38639:function(t,e,r){"use strict";var n=r(9404),s=r.n(n),o=r(62193),i=r.n(o),a=r(69752),c=r.n(a);class u extends(s().Record({_objects:s().OrderedMap({}),_temporaryObjects:s().OrderedMap({}),_object:null,isLoadingResource:!1,isLoadingCollection:!1,createdAt:null})){static initClass(){["filter","sortBy","reverse"].forEach((t=>(t=>(this.prototype[t]=function(){return this.set("_objects",this._objects[t](...arguments))},this.prototype[t]))(t)));["forEach","map","indexOf"].forEach((t=>(t=>(this.prototype[t]=function(){return this._objects.toList()[t](...arguments)},this.prototype[t]))(t)));["toJSON","toObject","toJS","toArray","count","toList","first","isEmpty"].forEach((t=>(t=>(this.prototype[t]=function(){return this._objects[t](...arguments)},this.prototype[t]))(t)))}constructor(t){super({_object:t,createdAt:Date.now()})}is(t){return s().is(this._objects,t._objects)}strictEqual(t){return this._objects.strictEqual(t._objects)}hydrate(t){if(i()(t))return this;const e={};for(const r in t){const n=t[r],s=n.id,o=this.getById(s);e[s]=o?o.hydrate(n):new this._object(n)}return this._setObjects(this._objects.merge(e))}invalidateCache(t={}){t.expiryTimeInMinutes||(t.expiryTimeInMinutes=15),t.sizeLimit||(t.sizeLimit=100);const e=Date.now()-this.createdAt>=6e4*t.expiryTimeInMinutes,r=this.size()>t.sizeLimit;if(e||r){let t=this;return t=t.set("_objects",s().OrderedMap({})),t=t.set("createdAt",Date.now()),this._persist(t)}return this}clearCache(){const t=this.set("_objects",s().OrderedMap({}));return this._persist(t)}getAll(t){if(t){const e=this._objects.filter((function(e){let r=!0;for(const n in t){const s=t[n];s instanceof Array||s?.toArray&&s?.includes?s.includes(e[n])||(r=!1):e[n]!==s&&(r=!1)}return r}));return this.set("_objects",e)}return this}getFirst(t){return this.getAll(t).first()}getById(t){return t instanceof Array?this.getAll({id:t}).sortBy((e=>t.indexOf(e.id))):t?.toArray?this.getById(t.toArray()):t?this._objects.get(t.toString())||this._temporaryObjects.get(t.toString()):null}sort(t,e="ASC"){const r=function(t,e){if("string"!==typeof t&&"string"!==typeof e)return t<e?-1:t>e?1:0;const r=[],n=[];for(t.replace(/(\d+)|(\D+)/g,(function(t,e,n){r.push([e||1/0,n||""])})),e.replace(/(\d+)|(\D+)/g,(function(t,e,r){n.push([e||1/0,r||""])}));r.length&&n.length;){const t=r.shift(),e=n.shift(),s=t[0]-e[0]||t[1].localeCompare(e[1]);if(s)return s}return r.length-n.length},n=this._objects.sort(((n,s)=>"DESC"===e?r(s[t],n[t]):r(n[t],s[t])));return this.set("_objects",n)}pluck(t){return this.map((e=>e[t])).toArray()}pluckObject(t){return this.map((e=>c()(t,((t,r,n)=>{t[n]=e[r]})))).toJS()}merge(t){return this._setObjects(this._objects.merge(t))}groupBy(t){const e={};this._objects.forEach((r=>{const n=t(r);return e[n]||(e[n]=[]),e[n].push(r.id)}));let r=s().OrderedMap();for(const n in e){const t=e[n];r=r.set(n,this.getById(t))}return r}add(t,e,r={}){if(r.temporary)return e.temporary=!0,this._persist(this.setIn(["_temporaryObjects",t.toString()],new this._object(e)));{const r={};return r[`${t}`]=e,this.hydrate(r)}}update(t,e){const r=this.getById(t);return r?r.temporary?this._persist(this.setIn(["_temporaryObjects",t.toString()],r.hydrate(e))):this._setObjects(this._objects.set(t.toString(),r.hydrate(e))):this.add(t,e)}delete(t){const e=this.getById(t);return e?e.temporary?this._persist(this.deleteIn(["_temporaryObjects",t.toString()])):this._setObjects(this._objects.delete(t.toString())):this}_setObjects(t){return this._persist(this.set("_objects",t))}_persist(t){return this._object._collection=t,this._object._collection}size(){return this._objects.size}get length(){return this.size()}}u.initClass(),e.A=u},21658:function(t,e,r){"use strict";r.d(e,{Ay:function(){return w},Ff:function(){return f},AG:function(){return p}});var n=r(96540),s=r(5556),o=r.n(s),i=r(68238),a=r(69733),c=r(9404);const u="UPDATE_UI",d="MOUNT_UI",l="UNMOUNT_UI",_=new c.Map({});function f(t=_,e){const r=e.payload&&e.payload.key;switch(e.type){case d:{const{defaults:n}=e.payload,s=(0,c.Record)(n);t=t.set(r,new s);break}case u:{const{values:n}=e.payload;if(t.get(r))for(const e in n)t=t.setIn([r,e],n[e]);break}case l:t=t.delete(r)}return t}function p(t,e){return{type:u,payload:{key:t,values:e}}}function m(t,e){return{type:d,payload:{key:t,defaults:e}}}function y(t){return{type:l,payload:{key:t}}}var h=r(37584),g=r.n(h);function b(){return b=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},b.apply(null,arguments)}var w=function(t,e={}){"object"===typeof t&&(t=(e=t).key);const r=(e.connectWith||a.Ng)((function(r,n){const s=[t,n.uiKey].join("");return{uiKey:s,uiDefaults:e.state||{},ui:r.interface.get(s)||e.state}}),(function(t,e){return(0,i.zH)({updateUI:p,mountUI:m,unmountUI:y},t)}));return t=>{class s extends n.Component{static displayName=(()=>`ReduxInterface(${t.displayName})`)();static propTypes=(()=>({uiKey:o().string.isRequired,uiDefaults:o().object,ui:o().object,updateUI:o().func.isRequired,mountUI:o().func.isRequired,unmountUI:o().func.isRequired}))();UNSAFE_componentWillMount(){this.props.mountUI(this.props.uiKey,this.props.uiDefaults)}componentWillUnmount(){!0!==e.persist&&(window&&window.requestAnimationFrame?window.requestAnimationFrame((()=>this.props.unmountUI(this.props.uiKey))):this.props.unmountUI(this.props.uiKey))}updateUI(t){return this.props.updateUI(this.props.uiKey,t)}render(){return n.createElement(t,b({},this.props,{updateUI:this.updateUI.bind(this)}))}}s.displayName="InterfaceComponent";const i=r(s);class a extends n.Component{static propTypes=(()=>({uiKey:o().string}))();render(){return this.uiKey=this.uiKey||this.props.uiKey||g()(),n.createElement(i,b({uiKey:this.uiKey},this.props))}}return a.displayName="ComponentWithKey",a}}},10196:function(t,e,r){"use strict";r.d(e,{B:function(){return s},r:function(){return o}});var n=r(47767);const s={navigate:null,push:(t,...e)=>s.navigate(t,...e)},o=()=>(s.navigate=(0,n.Zp)(),null)},26807:function(t,e,r){"use strict";r.d(e,{at:function(){return i},gH:function(){return o},jL:function(){return a},vQ:function(){return c}});var n=r(19747),s=r.n(n);const o={DELIVERIES:"deliveries",EQUIPMENT_RENTAL_SOFTWARE_LINK:"equipment_rental_software_link",NEW_ADDRESS_VALIDATION:"new_address_validation",NEW_PAYMENTS:"new_payments"},i=(...t)=>{const e=(window.store||window.booqableGetStore?.())?.getState(),r=e.session?.enabledFeatures||e.client?.enabledFeatures;return s()(t,(t=>(r||[]).includes(t)))},a=(...t)=>!i(...t),c=(...t)=>{const e=window.store?.getState();return s()(t,(t=>(e.session.features||[]).includes(t)))}},82637:function(t,e,r){"use strict";r.d(e,{Tn:function(){return g},dj:function(){return A}});var n=r(19747),s=r.n(n),o=r(42426),i=r.n(o),a=r(95950),c=r.n(a),u=r(7309),d=r.n(u),l=r(18938),_=r.n(l),f=r(64974),p=r(90397),m=r(38639),y=r(43128);const h={0:["sun","weekend","all"],1:["mon","weekday","all"],2:["tue","weekday","all"],3:["wed","weekday","all"],4:["thu","weekday","all"],5:["fri","weekday","all"],6:["sat","weekend","all"]},g=(t,e={})=>{const r=[t.settings.get("store.period_type")],n=e.operatingRules||t.orm.operating_rules;return t.settings.get("store.use_business_hours")&&r.push("hours"),t.settings.get("store.use_away_mode")&&r.push("away"),((t,e)=>{const r=e.includes("timeslot_fixed"),n=e.includes("hours");if(r&&n){const e=[],r=[];return t.forEach((t=>{"timeslot_fixed"!==t.data_type?"hours"!==t.data_type||r.push(..._()(t.data).map((([t,e])=>({day:t,...e})))):e.push(..._()(t.data).map((([t,e])=>({day:t,...e}))).filter((t=>"length"!==t.day)))})),!(0,y.a)(e,r)}return!1})(n,r)?new m.A:n&&n.getAll({data_type:r})},b=(t,e,r,n,s=!1)=>{if(!t)return!1;if("timeslot_fixed"===p.Ay.get("store.period_type")&&!r&&!n)return w.fixedTimeslotsForDate(e.getAll({data_type:"timeslot_fixed"}),t,{allowPast:s}).size()>0;if(0===e.getAll({data_type:"hours"}).size())return!0;const o={};e.getAll({data_type:"hours"}).forEach((t=>{const e=c()(t.data)[0];o[e]=o[e]||[],o[e].push(t)}));let a=null;const u=t.day();let d;return h[u].forEach((t=>{a=a||o[t]})),d=!!a&&(!!n||i()(a,(e=>{const r=c()(e.data)[0],n=e.data[r].from,s=e.data[r].till,o=t.format("YYYY-MM-DD");return f.Ay.range((0,f.Ay)(`${o} ${n}`,"YYYY-MM-DD HH-mm"),(0,f.Ay)(`${o} ${s}`,"YYYY-MM-DD HH-mm")).contains(t)}))),d},w={fixedTimeslotsForDate(t,e,r={}){const n=(e=e?(0,f.Ay)(e):(0,f.Ay)()).day(),s=h[n],o=t.groupBy((t=>c()(t.data)[0]));for(const i of s){const t=o.get(i);if(t)return t.filter((t=>{const n=c()(t.data)[0],s=t.data[n].from,o=s.split(":")[0],i=s.split(":")[1],a=e.clone().set({hour:o,minute:i});return this.isTimeSelectable(a,{...r,skipTimeslots:!0})}))}return new m.A},isTimeSelectable(t,e={}){const r=(window.store||window.booqableStore).getState(),n=(t=>{const e=t.client&&t.client.company&&t.client.company.get("utc_offset");let r;if(e){const t=e-(0,f.sp)().utcOffset(),n=(0,f.Rz)().add(t,"minutes");r=t<0?(0,f.Rz)():n}else r=(0,f.Rz)();return r})(r);if(!e.allowPast){if(((t,e,r=!1)=>{if(r){const r=t.clone().startOf("day"),n=e.clone().startOf("day");if(r.isBefore(n))return!0}else if(t.isBefore(e))return!0;return!1})(t,n,!p.Ay.get("store.use_times")&&"fixed"!==p.Ay.get("orders.start_type")))return!1;if(!((t,e,r)=>{if(p.Ay.get("store.use_order_lag_time")){if(!p.Ay.get("store.use_times")&&"hours"!==p.Ay.get("store.order_lag_time_interval")||r){const r=e.clone().startOf("day").add(p.Ay.get("store.order_lag_time_value"),p.Ay.get("store.order_lag_time_interval")).subtract(1,"day");return t.isAfter(r,"day")}if(t.diff(e,p.Ay.get("store.order_lag_time_interval"))<p.Ay.get("store.order_lag_time_value"))return!1}return!0})(t,n,e.dateOnly))return!1}this._timeAvailableCache=this._timeAvailableCache||{};const o=e.dateOnly?t.format("YYYY-MM-DD"):t.format();if(void 0!==this._timeAvailableCache[o])return this._timeAvailableCache[o];if(!e.dateOnly&&!this.isTimeSelectable(t,{...e,dateOnly:!0}))return this._timeAvailableCache[o]=!1,!1;const i=g(r,e);if(!i||0===i.size())return!0;if(((t,e)=>{const r=e.getAll({data_type:"away"}).toArray();return 0!==r.length&&!s()(r,(e=>!f.Ay.range((0,f.Ay)(e.data.away.from).startOf("day"),(0,f.Ay)(e.data.away.till).endOf("day")).contains(t)))})(t,i))return this._timeAvailableCache[o]=!1,!1;const a=b(t,i,e.skipTimeslots,e.dateOnly,e.allowPast);return this._timeAvailableCache[o]=a,a},firstTimeSelectable(){const t=(0,f.Rz)(),e=t.minute();for(0===e||(e<15?t.set("minute",15):e<30?t.set("minute",30):e<45?t.set("minute",45):e<=59&&(t.set("minute",0),t.add(1,"hour")));!this.isTimeSelectable(t);){const e=A(t);if(e){const r=(0,f.Ay)(e.data.away.till);t.set({year:r.year(),month:r.month(),date:r.date()}),t.endOf("day")}t.add(15,"minutes")}return t},isWithinOpeningHours:b};e.Ay=w;const A=t=>{const e=(window.store||window.booqableStore).getState(),r=g(e).getAll({data_type:"away"}).toArray();if(0===r.length)return!1;return d()(r,(e=>f.Ay.range((0,f.Ay)(e.data.away.from).startOf("day"),(0,f.Ay)(e.data.away.till).endOf("day")).contains(t)))}},3295:function(t,e,r){"use strict";function n(t){const e=window.store.getState().orm.companies.first();"function"===typeof t&&(t=t()),document.title=`${t} | ${e&&e.name} | Booqable`}r.d(e,{A:function(){return n}})},18481:function(t,e,r){"use strict";r.d(e,{_l:function(){return c}});var n=r(64974),s=r(90397),o=r(82637),i=r(55364),a=r.n(i);window.browserUseAmPm=function(){const t=new Date(Date.UTC(2013,11,31,3,0,0)).toLocaleTimeString();return!(!t.match(/am|pm/i)&&!t.toString().match(/am|pm/i))}();const c=t=>{const e=t.split(/:|\./)[1]?.match(/\d*/)[0],r=(t=>{const e=t.match(/am/gi),r=t.match(/pm/gi);return e?"am":r?"pm":null})(t);let n=t.split(/:|\./)[0]?.match(/\d*/)[0];return r&&("12"===n&&(n="0"),"pm"===r&&(n=parseInt(n,10)+12)),{hour:n,minute:e}},u=(t,e={})=>{let r=e.date?(0,n.Ay)(e.date):(0,n.Rz)();const i=s.Ay.get(`orders.${t}_type`,"relative");switch(i){case"relative":{const e=parseFloat(s.Ay.get(`orders.${t}_relative_offset`,0));r.add(e,"hour");break}case"fixed":{const e=s.Ay.get(`orders.${t}_fixed_at`,"09:00")||"09:00",{hour:n,minute:o}=c(e);n&&(r=r.hour(n)),o&&(r=r.minute(o));break}}r.set("millisecond",0),r.set("second",0);const u=r.minute();if("relative"===i&&(0===u||(u<15?r.set("minute",15):u<30?r.set("minute",30):u<45?r.set("minute",45):u<=59&&(r.set("minute",0),r.add(1,"hour")))),e.defaultStartTime&&r.isSameOrBefore(e.defaultStartTime)&&r.add(1,"day"),"stop"===t&&r.isSameOrBefore(e.defaultStartTime||(0,n.Ay)())){const t=Math.abs(r.diff(e.defaultStartTime||(0,n.Ay)(),"days"));r.add(t+1,"day")}const d=(0,o.dj)(r);if(d){const t=(0,n.Ay)(d.data.away.till);r=r.set({year:t.year(),month:t.month(),date:t.date()})}if(!1!==e.useOpeningHours){if(!0!==e.dontChangeDate)for(;!o.Ay.isTimeSelectable(r,a()({},e,{dateOnly:!0}));)r.add(1,"day");if(!o.Ay.isTimeSelectable(r,e))for("start"===t?r.startOf("day"):r.endOf("day");!o.Ay.isTimeSelectable(r,e);){for(let n=1;n<=96;++n)if("start"===t?r.add(15,"minutes"):59===r.minutes()?r.subtract(14,"minutes"):r.subtract(15,"minutes"),o.Ay.isTimeSelectable(r,e))return r;"stop"===t&&(r.add(1,"day"),r.endOf("day"))}}return r};e.Ay={defaultStartTime:(t={})=>u("start",t),defaultStopTime:(t={})=>u("stop",t),defaultTime:u}},43128:function(t,e,r){"use strict";r.d(e,{a:function(){return u},v:function(){return d}});var n=r(95093),s=r.n(n),o=r(5287),i=r.n(o);const a={all:["mon","tue","wed","thu","fri","sat","sun"],weekday:["mon","tue","wed","thu","fri"],weekend:["sat","sun"],mon:["mon"],tue:["tue"],wed:["wed"],thu:["thu"],fri:["fri"],sat:["sat"],sun:["sun"]};function c(t){return e=>!!t.find((t=>{const r=a[e.day],n=a[t.day];return i()(r,n).length>0&&s()(e.from,"HH:mm").isSameOrAfter(s()(t.from,"HH:mm"),"second")&&s()(e.till,"HH:mm").isSameOrBefore(s()(t.till,"HH:mm"),"second")}))}function u(t,e){return t.some(c(e))}function d(t,e){return t.every(c(e))}},42634:function(){}}]);
//# sourceMappingURL=373-983c6f516745badfeca6.js.map